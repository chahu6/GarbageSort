{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Lenovo/Desktop/Tools/GarbageSort/frontend/pages/user/profile.vue?1bee","webpack:///C:/Users/Lenovo/Desktop/Tools/GarbageSort/frontend/pages/user/profile.vue?65a3","webpack:///C:/Users/Lenovo/Desktop/Tools/GarbageSort/frontend/pages/user/profile.vue?2fd4","webpack:///C:/Users/Lenovo/Desktop/Tools/GarbageSort/frontend/pages/user/profile.vue?db8c","uni-app:///pages/user/profile.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","nickname","headImg","sex","phone","created","mounted","onShow","methods","fetchData","console","uni","url","method","userId","success","me","fail","changeHead","count","filePath","name","userInfo","selectSex","itemList","gender","title","icon","changeNickname"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAmpB,CAAgB,wqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuBvqB;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACA;MACA;MACA;MACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC,6BAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MAEA;MACA;MACAC;MACA;QACAC;UACAC;UACAC;UACAb;YACAc;UACA;UACAC;YACAL;YACA;YAEAM;YACAA;YACAA;UACA;UACAC;YACAP;UACA;QACA;MACA;QACAM;QACAA;QACAA;MACA;IACA;IACAE;MACA;MAEAP;QACAQ;QACAJ;UACA;UACA;UACA;UACAJ;YACAC;YACAQ;YACAC;YACAN;cACAL;cACA;cACAM;cACA;cACAM;cACAX;YACA;YACAM;cACAP;YACA;UACA;QAEA;MACA;IACA;IACAa;MACA;MACA;MAEA;MACAZ;QACAa;QACAT;UACA;UAEAJ;YACAC;YACAC;YACAb;cACAc;cACAW;YACA;YACAV;cACAL;cACA;cACA;gBACA;gBACAM;gBAEA;gBACAM;gBACAZ;gBACAC;gBAEAA;kBACAe;gBACA;cACA;gBACAf;kBACAe;kBACAC;gBACA;cACA;YACA;YACAV;cACAP;cACAC;gBACAe;gBACAC;cACA;YACA;UACA;QACA;QACAV;UACAP;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAkB;MACAjB;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/user/profile.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/profile.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./profile.vue?vue&type=template&id=64c291de&\"\nvar renderjs\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/profile.vue\"\nexport default component.exports","export * from \"-!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=template&id=64c291de&\"","var components\ntry {\n  components = {\n    uCellGroup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-cell-group/u-cell-group\" */ \"@/uview-ui/components/u-cell-group/u-cell-group.vue\"\n      )\n    },\n    uCellItem: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-cell-item/u-cell-item\" */ \"@/uview-ui/components/u-cell-item/u-cell-item.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<u-cell-group>\r\n\t\t\t<u-cell-item title=\"头像\" @click='changeHead'>\r\n\t\t\t\t<u-image width='100rpx' height='100rpx' slot=\"right-icon\" :src=\"headImg\" shape=\"circle\"></u-image>\r\n\t\t\t</u-cell-item>\r\n\t\t\t<u-cell-item title=\"昵称\" @click=\"changeNickname\">{{nickname}}</u-cell-item>\r\n\t\t\t<u-cell-item title=\"性别\" :value=\"sex\" @click='selectSex'></u-cell-item>\r\n\t\t\t<!-- <u-cell-item title=\"出生日期\" :value=\"birthday\" @click='show=true'></u-cell-item> -->\r\n\t\t\t<u-cell-item title=\"手机话\" :value=\"phone\" :arrow=\"false\"></u-cell-item>\r\n\t\t\t<!-- <u-cell-item title=\"常居地\" :value=\"address\" @click='showAddr=true'></u-cell-item> -->\r\n<!-- \t\t\t<u-cell-item title=\"个人简介\" >\r\n\t\t\t\t<view class=\"u-line-1 u-p-l-30\">\r\n\t\t\t\t\t{{profile}}\r\n\t\t\t\t</view>\r\n\t\t\t</u-cell-item> -->\r\n\t\t</u-cell-group>\r\n\t\t<!-- <u-calendar v-model=\"show\" @change=\"change\"></u-calendar> -->\r\n\t\t<!-- <u-picker mode=\"region\" v-model=\"showAddr\" :area-code='[\"21\", \"2101\", \"210103\"]' @confirm='selectAddr'></u-picker> -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnickname: '微信用户',\r\n\t\t\t\theadImg:'/static/logo.png',\r\n\t\t\t\tsex: '男',\r\n\t\t\t\t// birthday: '2021-02-23',\r\n\t\t\t\t// show: false,\r\n\t\t\t\t// address:'辽宁省-沈阳市-沈河区',\r\n\t\t\t\t// profile:'欢迎加扣群(325021815)交流学习',\r\n\t\t\t\t// showAddr:false,\r\n\t\t\t\tphone: '19839715890'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t    this.fetchData();\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\t\r\n\t\t},\r\n\t\t// beforeRouteEnter(to, from, next) {\r\n\t\t//   // 在进入路由前刷新数据\r\n\t\t//   next(vm => {\r\n\t\t//     vm.refreshData();\r\n\t\t//   });\r\n\t\t// },\r\n\t\tonShow(){\r\n\t\t\tconst userInfo = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\tthis.sex = userInfo.gender;\r\n\t\t\tthis.nickname = userInfo.nickname;\r\n\t\t\tthis.phone = userInfo.phone;\r\n\t\t\tthis.headImg = userInfo.avatar\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfetchData(){\r\n\t\t\t\tlet me = this;\r\n\t\t\t\t\r\n\t\t\t\tconst userId = uni.getStorageSync('userId')\r\n\t\t\t\tconst userInfo = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\t\tconsole.log(userInfo)\r\n\t\t\t\tif(userInfo === null){\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: me.serverUrl + \"/user/info\",\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tuserId: userId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log(\"success :\", res.data);\r\n\t\t\t\t\t\t\tlet data = res.data.data\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tme.sex = data.gender;\r\n\t\t\t\t\t\t\tme.nickname = data.nickname;\r\n\t\t\t\t\t\t\tme.phone = data.phone\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(e){\r\n\t\t\t\t\t\t\tconsole.log(\"error: \", e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tme.sex = userInfo.gender;\r\n\t\t\t\t\tme.nickname = userInfo.nickname;\r\n\t\t\t\t\tme.phone = userInfo.phone;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangeHead(){\r\n\t\t\t\tlet me = this;\r\n\t\t\t\t\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t    count: 1, \r\n\t\t\t\t    success: (res)=> {\r\n\t\t\t\t\t\tconst tempFilePath = res.tempFilePaths[0];\r\n\t\t\t\t\t\t// me.headImg = tempFilePath\r\n\t\t\t\t\t\tconst userId = uni.getStorageSync('userId')\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: `${me.serverUrl}/file/upload/${userId}`,\r\n\t\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t\t\tconst data = JSON.parse(res.data)\r\n\t\t\t\t\t\t\t\tme.headImg = data.data\r\n\t\t\t\t\t\t\t\tconst userInfo = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\t\t\t\t\t\tuserInfo.avatar = data.data\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tselectSex() {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tconst userId = JSON.parse(uni.getStorageSync('userId'))\r\n\t\t\t\t\r\n\t\t\t\tconst arr = ['男', '女', '保密']\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: arr,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tlet gender = arr[res.tapIndex]\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: me.serverUrl + \"/user\",\r\n\t\t\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\t\t\t\tgender: gender\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"success :\", res.data);\r\n\t\t\t\t\t\t\t\tlet data = res.data.data\r\n\t\t\t\t\t\t\t\tif(res.data.code >= 0){\r\n\t\t\t\t\t\t\t\t\t// this.newNickname = data.nickname\r\n\t\t\t\t\t\t\t\t\tme.sex = gender\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconst userInfo = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\t\t\t\t\t\t\tuserInfo.gender = gender\r\n\t\t\t\t\t\t\t\t\tconsole.log('gender: ' + gender)\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"修改成功\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"修改失败\",\r\n\t\t\t\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e){\r\n\t\t\t\t\t\t\t\tconsole.log(\"error: \", e);\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"修改失败\",\r\n\t\t\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// change(e) {\r\n\t\t\t// \tthis.birthday = e.result\r\n\t\t\t// },\r\n\t\t\t// selectAddr(e){\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t// \tthis.address = `${e.province.label}-${e.city.label}-${e.area.label}`\r\n\t\t\t// },\r\n\t\t\tchangeNickname(){\r\n\t\t\t\tuni.setStorageSync('nickname', this.nickname)\r\n\t\t\t\tthis.$u.urlskip('/pages/user/nickname', 'navigateTo');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}